<ion-content padding>
  <!-- Refresher -->
  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <!-- Loading Spinner -->
  <ion-grid class="align-things-center" *ngIf="pageLoadFlag">
    <ion-row col-12 class="align-things-center">
      <ion-col col-12>
        <div class="main-spinner"></div>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid *ngIf="!pageLoadFlag">
    <ion-row class="top-row">
      <ion-col col-3 class="back-arrow above-map" (tap)="homePage()">
        <img src="assets/icon/custom/back_arrow.png">
      </ion-col>
    </ion-row>

    <!-- tag section -->
    <ion-row class="tag-row">
      <!-- <ion-col col-3 class="sponsor" *ngIf="item.sponsered">
          <button>
            Sponsor
          </button>
        </ion-col> -->
      <ion-col col-9 class="category">
        <button>
          {{ product.category.name }}
        </button>
        <p>
          <span>.</span>
          {{ huntedProductSubcat }}
        </p>
      </ion-col>
      <!-- <ion-col col-3 *ngIf="!(product.sponsered)"></ion-col> -->
      <ion-col col-3 class="subcategory align-things-right">
        <div class="bookmark-button" (click)="bookmark()">
          <ion-icon *ngIf="!isBookmarked?.flag; else elseBlocked" ios="ios-bookmark" md="md-bookmark" [ngStyle]="{'color': '#d0d0d0'}"
            class="bookmark-icon"></ion-icon>
          <ng-template #elseBlocked>
            <ion-icon ios="ios-bookmark" md="md-bookmark" class="bookmark-icon" [ngStyle]="{'color': '#FF6260'}"></ion-icon>
          </ng-template>
        </div>
      </ion-col>
    </ion-row>

    <!-- slide section -->
    <ion-row>
      <ion-slides *ngIf="product?.photos.length>0; else viewDiv">
        <ion-slide col-12 *ngFor="let image of product.photos; let i = index">
          <div class="main-slider-image" [ngStyle]="{'background-image':'url('+ image.thumb400Url +')'}" (click)="openImage(i)">
          </div>
        </ion-slide>
      </ion-slides>
      <ng-template #viewDiv>
        <div class="main-slider-image" [ngStyle]="{'background-image':'url(assets/imgs/default_image_slider.png)'}">
        </div>
      </ng-template>
    </ion-row>
    <ion-scroll *ngIf="product?.photos.length>0; else showDiv;" class="thumbnail-image-slider" scrollX="true" style="height:115px">
      <ion-row nowrap>
        <ion-col *ngFor="let image of product.photos; let i = index" col-3>
          <div class="slider-thumbnail" [ngStyle]="{'background-image':'url('+ image.thumb200Url +')'}" (click)="openSlider(i)">
          </div>
        </ion-col>
      </ion-row>
    </ion-scroll>
    <ng-template #showDiv>
      <ion-scroll class="thumbnail-image-slider" scrollX="true" style="height: 115px;">
        <ion-row nowrap>
          <ion-col col-3>
            <div class="slider-thumbnail" [ngStyle]="{'background-image':'url(assets/imgs/default_image_company.png)'}">
            </div>
          </ion-col>
        </ion-row>
      </ion-scroll>
    </ng-template>
    <ion-row class="recipe-name">
      <ion-col col-12>
        <h2>{{ product?.name }}</h2>
      </ion-col>
    </ion-row>
    <!-- user section -->
    <ion-row>
      <ion-col col-8>
        <ion-row *ngIf="product?.addedBy; else showNHStuff">
          <ion-col col-3>
            <div class="avatar" *ngIf="product.addedBy.photo; else showDummyImage" [ngStyle]="{'background-image':'url('+ product.addedBy.photo.thumb200Url +')'}"></div>
            <ng-template #showDummyImage>
              <div class="avatar" [ngStyle]="{'background-image':'url(assets/imgs/defaultUser.png)'}"></div>
            </ng-template>
          </ion-col>
          <ion-col col-9 class="user-details" (click)="openUser(product.addedBy._id)">
            <h2>{{ product?.addedBy?.name }}</h2>
            <p>{{ currentLocation?.city }}, {{ currentLocation?.state }}</p>
          </ion-col>
        </ion-row>
        <ng-template #showNHStuff>
          <ion-row>
            <ion-col col-3>
              <div class="avatar" [ngStyle]="{'background-image':'url(assets/imgs/defaultIcon.png)'}"></div>
            </ion-col>
            <ion-col col-9 class="user-details">
              <h2>Naturehub Staff</h2>
              <p>USA</p>
            </ion-col>
          </ion-row>
        </ng-template>
      </ion-col>
      <ion-col col-3 (click)="like()" class="align-things-right product-like">
        <ion-icon *ngIf="!isLiked?.flag; else elseBlock" ios="ios-heart-outline" md="md-heart-outline" class="heart-icon"
          [ngStyle]="{'color': '#9F9F9F'}"></ion-icon>
        <ng-template #elseBlock>
          <ion-icon ios="ios-heart" md="md-heart" class="heart-icon" [ngStyle]="{'color': '#FF6260'}"></ion-icon>
        </ng-template>
        <span id="count">{{ product?.likes }} </span>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col col-12>
        <h2 class="product-heading">Product Description</h2>
      </ion-col>
      <ion-col col-12>
        <p class="description">{{ product?.description }}</p>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col>
        <h2 class="product-heading">Company / Founder </h2>
      </ion-col>
    </ion-row>
    <ion-row class="product-div">
      <ion-col col-3>
        <div class="avatar" [ngStyle]="{'background-image':'url('+ product.logoUrl?.thumb400Url +')'}"></div>
      </ion-col>
      <ion-col col-9>
        <h3 class="product-name">{{ product.founderName }}</h3>
      </ion-col>
      <ion-col col-12>
        <p class="description">{{ product.founderDescription }}</p>
      </ion-col>
    </ion-row>
    <ion-row class="align-things-center">
      <ion-col col-12 class="align-things-center">
        <button ion-button round outline class="buy" (click)="showToast()">Notify me when it's available to buy</button>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
